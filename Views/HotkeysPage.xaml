<UserControl x:Class="ClientOPreview.Views.HotkeysPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">
  <Grid Margin="10">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    
    <TextBlock Text="Hotkeys" FontWeight="SemiBold" Margin="0,0,0,10"/>
    
    <Grid Grid.Row="1">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="220"/>
      </Grid.ColumnDefinitions>
      
      <!-- Left side: Hotkey settings -->
      <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" Margin="0,0,10,0">
        <StackPanel>
          <!-- Enable/Disable -->
          <CheckBox x:Name="ChkEnabled" Content="Enable global hotkeys" Margin="0,0,0,16" Checked="OnEnabledChanged" Unchecked="OnEnabledChanged"/>
          
          <!-- Cycle Hotkey Section -->
          <TextBlock Text="Cycle Hotkey" FontWeight="SemiBold" Margin="0,0,0,6"/>
          <TextBlock Text="Press this hotkey to cycle through open thumbnails" Foreground="Gray" Margin="0,0,0,8"/>
          
          <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
            <TextBlock Text="Modifiers:" Width="80" VerticalAlignment="Center"/>
            <CheckBox x:Name="ChkCycleAlt" Content="Alt" Margin="0,0,12,0" Checked="OnCycleModifiersChanged" Unchecked="OnCycleModifiersChanged"/>
            <CheckBox x:Name="ChkCycleCtrl" Content="Ctrl" Margin="0,0,12,0" Checked="OnCycleModifiersChanged" Unchecked="OnCycleModifiersChanged"/>
            <CheckBox x:Name="ChkCycleShift" Content="Shift" Checked="OnCycleModifiersChanged" Unchecked="OnCycleModifiersChanged"/>
          </StackPanel>
          
          <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
            <TextBlock Text="Key:" Width="80" VerticalAlignment="Center"/>
            <TextBox x:Name="TxtCycleKey" Width="120" IsReadOnly="True" PreviewKeyDown="OnCycleKeyDown" 
                     GotFocus="OnKeyBoxFocus" LostFocus="OnKeyBoxLostFocus"
                     ToolTip="Click and press a key to set"/>
            <TextBlock Text="(Click and press a key)" Foreground="Gray" Margin="8,0,0,0" VerticalAlignment="Center"/>
          </StackPanel>
          
          <Separator Margin="0,0,0,16"/>
          
          <!-- Direct Hotkeys Section -->
          <TextBlock Text="Direct Hotkeys" FontWeight="SemiBold" Margin="0,0,0,6"/>
          <TextBlock Text="Press these hotkeys to activate a specific thumbnail by index" Foreground="Gray" Margin="0,0,0,8"/>
          
          <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
            <TextBlock Text="Modifiers:" Width="80" VerticalAlignment="Center"/>
            <CheckBox x:Name="ChkDirectAlt" Content="Alt" Margin="0,0,12,0" Checked="OnDirectModifiersChanged" Unchecked="OnDirectModifiersChanged"/>
            <CheckBox x:Name="ChkDirectCtrl" Content="Ctrl" Margin="0,0,12,0" Checked="OnDirectModifiersChanged" Unchecked="OnDirectModifiersChanged"/>
            <CheckBox x:Name="ChkDirectShift" Content="Shift" Checked="OnDirectModifiersChanged" Unchecked="OnDirectModifiersChanged"/>
          </StackPanel>
          
          <TextBlock Text="Keys for thumbnails 1-10:" Margin="0,0,0,8"/>
          
          <ItemsControl x:Name="DirectKeysList">
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                  <TextBlock Text="{Binding Label}" Width="100" VerticalAlignment="Center"/>
                  <TextBox Width="100" Text="{Binding Key}" IsReadOnly="True" 
                           PreviewKeyDown="OnDirectKeyDown" Tag="{Binding Index}"
                           GotFocus="OnKeyBoxFocus" LostFocus="OnKeyBoxLostFocus"/>
                </StackPanel>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
          
        </StackPanel>
      </ScrollViewer>
      
      <!-- Right side: Open thumbnails list -->
      <Border Grid.Column="1" BorderBrush="#ccc" BorderThickness="1" Padding="8">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>
          
          <TextBlock Text="Open Thumbnails" FontWeight="SemiBold" Margin="0,0,0,8"/>
          
          <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <ItemsControl x:Name="OpenThumbnailsList">
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <TextBlock Text="{Binding Index}" Width="20" FontWeight="Bold" Foreground="#666"/>
                    <TextBlock Text="{Binding Title}" TextTrimming="CharacterEllipsis" ToolTip="{Binding Title}"/>
                  </StackPanel>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </ScrollViewer>
          
          <TextBlock x:Name="TxtNoThumbnails" Grid.Row="1" Text="No thumbnails open" 
                     Foreground="Gray" FontStyle="Italic" 
                     HorizontalAlignment="Center" VerticalAlignment="Center"
                     Visibility="Collapsed"/>
        </Grid>
      </Border>
    </Grid>
  </Grid>
</UserControl>
